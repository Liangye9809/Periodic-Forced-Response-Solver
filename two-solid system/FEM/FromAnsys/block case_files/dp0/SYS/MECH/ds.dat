/batch
/config,noeldb,1     ! force off writing results to database
*get,_wallstrt,active,,time,wall
! ANSYS input file written by Workbench version 2025 R2
! File used for geometry attach: \\tsclient\data\liangye\study loves me\data\non-linear problem\Periodic Forced Response Solver\two-solid system\FEM\test_box\Block.iges
/title,block case--Modal (A5)
! ****** Begin Custom Load Command Snippet ******
/COM, ACT Extensions:
/COM,     LSDYNA, 2025.2
/COM,     5f463412-bd3e-484b-87e7-cbc0a665e474, wbex
/COM,/COM,     ANSYSMotion, 2025.2
/COM,     20180725-3f81-49eb-9f31-41364844c769, wbex
/COM,
! ****** End   Custom Load Command Snippet ******
*DIM,_wb_ProjectScratch_dir,string,248
_wb_ProjectScratch_dir(1) = '\\tsclient\data\liangye\study loves me\data\non-linear problem\Periodic Forced Response Solver\two-solid system\FEM\FromAnsys\_ProjectScratch\Scr320D\'
*DIM,_wb_SolverFiles_dir,string,248
_wb_SolverFiles_dir(1) = '\\tsclient\data\liangye\study loves me\data\non-linear problem\Periodic Forced Response Solver\two-solid system\FEM\FromAnsys\block case_files\dp0\SYS\MECH\'
*DIM,_wb_userfiles_dir,string,248
_wb_userfiles_dir(1) = '\\tsclient\data\liangye\study loves me\data\non-linear problem\Periodic Forced Response Solver\two-solid system\FEM\FromAnsys\block case_files\user_files\'
/com,--- Data in consistent MKS units. See Solving Units in the help system for more information.
/units,MKS
/nopr
/wb,file,start              !  signify a WB generated input file
/prep7
! Turn off shape checking because checks already performed inside WB mesher.
! See help system for more information.
SHPP,OFF,,NOWARN
/nolist
etcon,set             ! allow ANSYS to choose best KEYOP's for 180x elements, resets any applicable keyopt to MAPDL defaults
/com,*********** Send User Defined Coordinate System(s) ***********
csys,0
/com,*********** Nodes for the whole assembly ***********
nblock,3,,62
(1i9,3e20.9e3)
        1     0.000000000E+00     1.000000000E+00     0.000000000E+00
        2     0.000000000E+00     0.000000000E+00     0.000000000E+00
        3     0.000000000E+00     0.000000000E+00     2.000000000E+00
        4     0.000000000E+00     0.000000000E+00     1.000000000E+00
        5     0.000000000E+00     1.000000000E+00     2.000000000E+00
        6     0.000000000E+00     1.000000000E+00     1.000000000E+00
        7     1.000000000E+00     0.000000000E+00     0.000000000E+00
        8     1.000000000E+00     0.000000000E+00     2.000000000E+00
        9     1.000000000E+00     0.000000000E+00     1.000000000E+00
       10     1.000000000E+00     1.000000000E+00     0.000000000E+00
       11     1.000000000E+00     1.000000000E+00     2.000000000E+00
       12     1.000000000E+00     1.000000000E+00     1.000000000E+00
       13     0.000000000E+00     5.000000000E-01     1.500000000E+00
       14     0.000000000E+00     0.000000000E+00     1.500000000E+00
       15     0.000000000E+00     5.000000000E-01     2.000000000E+00
       16     0.000000000E+00     5.000000000E-01     5.000000000E-01
       17     0.000000000E+00     5.000000000E-01     1.000000000E+00
       18     0.000000000E+00     1.000000000E+00     5.000000000E-01
       19     5.000000000E-01     0.000000000E+00     1.587426407E+00
       20     1.000000000E+00     0.000000000E+00     1.500000000E+00
       21     5.000000000E-01     0.000000000E+00     2.000000000E+00
       22     5.000000000E-01     0.000000000E+00     5.000000000E-01
       23     4.218034445E-01     0.000000000E+00     9.609017222E-01
       24     0.000000000E+00     0.000000000E+00     5.000000000E-01
       25     5.697948447E-01     4.651025777E-01     0.000000000E+00
       26     1.000000000E+00     5.000000000E-01     0.000000000E+00
       27     5.000000000E-01     0.000000000E+00     0.000000000E+00
       28     5.000000000E-01     1.000000000E+00     2.000000000E+00
       29     5.000000000E-01     5.874264069E-01     2.000000000E+00
       30     1.000000000E+00     5.000000000E-01     2.000000000E+00
       31     5.997542231E-01     1.000000000E+00     1.000000000E+00
       32     5.877220211E-01     1.000000000E+00     1.500000000E+00
       33     1.000000000E+00     1.000000000E+00     1.500000000E+00
       34     1.000000000E+00     0.000000000E+00     5.000000000E-01
       35     1.000000000E+00     4.125735931E-01     5.000000000E-01
       36     1.000000000E+00     4.203611855E-01     9.633819751E-01
       37     4.511424649E-01     1.000000000E+00     3.110344167E-01
       38     3.410205984E-01     1.000000000E+00     6.986022224E-01
       39     7.998771115E-01     1.000000000E+00     5.000000000E-01
       40     2.938610105E-01     1.000000000E+00     1.750000000E+00
       41     2.953423524E-01     1.000000000E+00     1.311557388E+00
       42     0.000000000E+00     1.000000000E+00     1.500000000E+00
       43     1.000000000E+00     7.062867966E-01     2.500000000E-01
       44     1.000000000E+00     1.000000000E+00     5.000000000E-01
       45     1.000000000E+00     7.071634896E-01     6.895898957E-01
       46     1.000000000E+00     7.191398623E-01     1.292059861E+00
       47     1.000000000E+00     7.500000000E-01     1.750000000E+00
       48     1.000000000E+00     4.601805927E-01     1.481690988E+00
       49     3.030618303E-01     7.001879729E-01     0.000000000E+00
       50     2.500000000E-01     2.500000000E-01     0.000000000E+00
       51     0.000000000E+00     5.000000000E-01     0.000000000E+00
       52     4.942728655E-01     5.652192045E-01     1.270519129E+00
       53     5.997524011E-01     5.360366636E-01     7.107556989E-01
       54     7.099613288E-01     7.500000000E-01     1.709961329E+00
       55     7.607427342E-01     3.020712220E-01     1.746718800E+00
       56     7.054957742E-01     6.795318680E-01     3.081476308E-01
       57     6.593625537E-01     3.065389432E-01     2.830434296E-01
-1
/wb,elem,start            !  set before creation of elements
/com,*********** Elements for Body 1 'Open CASCADE IGES processor 7.9| DE        1|Solid' ***********
et,1,185
MAT,1 $ TYPE,1 $ REAL,1 $ SECNUM,1 $ ESYS,0
eblock,11,COMPACT,,141
(11i9)
        1       31       32       46       46       33       33       33       33
        2       12       31       46       46       33       33       33       33
        3       12       36       46       46       31       31       31       31
        4       12       36       31       31       45       45       45       45
        5       12       31       39       39       45       45       45       45
        6       13       42       40       40       41       41       41       41
        7        6       42       13       13       41       41       41       41
        8        6       38       17       17       16       16       16       16
        9       12       39       44       44       45       45       45       45
       10       13       29       40       40       15       15       15       15
       11       13       15       40       40       42       42       42       42
       12       13       19       29       29       15       15       15       15
       13        6       18       38       38       16       16       16       16
       14       39       45       43       43       44       44       44       44
       15        5       40       28       28       29       29       29       29
       16        5       40       29       29       15       15       15       15
       17        5       40       15       15       42       42       42       42
       18        3       19       13       13       15       15       15       15
       19       15       21       19       19       29       29       29       29
       20       16       17       24       24       23       23       23       23
       21       16       37       18       18       38       38       38       38
       22       10       39       43       43       44       44       44       44
       23        4       24       17       17       23       23       23       23
       24        3       13       19       19       14       14       14       14
       25        3       19       15       15       21       21       21       21
       26       16       24       22       22       23       23       23       23
       27       16       18       37       37       49       49       49       49
       28        1       49       37       37       18       18       18       18
       29       16       51       18       18       49       49       49       49
       30        1       51       49       49       18       18       18       18
       31        1       10       37       37       49       49       49       49
       32       16       50       51       51       49       49       49       49
       33       16       25       50       50       49       49       49       49
       34        2       50       22       22       27       27       27       27
       35        2       51       16       16       50       50       50       50
       36       32       52       40       40       41       41       41       41
       37       13       40       52       52       41       41       41       41
       38       13       17       52       52       14       14       14       14
       39        6       41       52       52       31       31       31       31
       40       31       32       41       41       52       52       52       52
       41       31       46       32       32       52       52       52       52
       42       31       36       46       46       52       52       52       52
       43       36       46       52       52       48       48       48       48
       44       13       19       52       52       29       29       29       29
       45       14       19       23       23       52       52       52       52
       46       13       52       19       19       14       14       14       14
       47       19       52       20       20       23       23       23       23
       48        6       31       52       52       38       38       38       38
       49        6       52       17       17       38       38       38       38
       50        9       36       52       52       48       48       48       48
       51        9       20       52       52       23       23       23       23
       52        9       52       20       20       48       48       48       48
       53       31       38       53       53       52       52       52       52
       54       35       53       36       36       45       45       45       45
       55       31       39       53       53       38       38       38       38
       56       31       53       39       39       45       45       45       45
       57       31       36       53       53       45       45       45       45
       58       31       53       36       36       52       52       52       52
       59       16       23       22       22       53       53       53       53
       60       16       53       37       37       38       38       38       38
       61       34       53       36       36       35       35       35       35
       62        9       53       22       22       23       23       23       23
       63       16       17       53       53       38       38       38       38
       64       17       53       38       38       52       52       52       52
       65       16       17       23       23       53       53       53       53
       66       17       23       53       53       52       52       52       52
       67       32       54       40       40       52       52       52       52
       68       28       54       40       40       32       32       32       32
       69       28       40       54       54       29       29       29       29
       70       11       28       54       54       29       29       29       29
       71       11       28       32       32       54       54       54       54
       72       46       54       48       48       47       47       47       47
       73       46       48       54       54       52       52       52       52
       74       32       46       54       54       52       52       52       52
       75       11       29       54       54       30       30       30       30
       76       11       30       54       54       47       47       47       47
       77       11       54       32       32       33       33       33       33
       78       11       54       33       33       47       47       47       47
       79       32       54       46       46       33       33       33       33
       80       33       54       46       46       47       47       47       47
       81        8       48       55       55       30       30       30       30
       82       29       30       55       55       54       54       54       54
       83       19       21       55       55       29       29       29       29
       84       21       55       29       29       30       30       30       30
       85       48       52       55       55       54       54       54       54
       86       19       29       55       55       52       52       52       52
       87       29       55       52       52       54       54       54       54
       88        8       20       19       19       55       55       55       55
       89        8       20       55       55       48       48       48       48
       90        8       55       19       19       21       21       21       21
       91        8       55       21       21       30       30       30       30
       92       10       39       37       37       56       56       56       56
       93       10       43       39       39       56       56       56       56
       94       10       26       43       43       56       56       56       56
       95       10       25       26       26       56       56       56       56
       96       10       49       25       25       56       56       56       56
       97       10       37       49       49       56       56       56       56
       98       35       43       56       56       45       45       45       45
       99       35       45       56       56       53       53       53       53
      100       39       56       43       43       45       45       45       45
      101       39       56       45       45       53       53       53       53
      102       16       49       37       37       56       56       56       56
      103       16       56       37       37       53       53       53       53
      104       16       25       49       49       56       56       56       56
      105       22       57       34       34       27       27       27       27
      106        7       57       34       34       35       35       35       35
      107        7       27       34       34       57       57       57       57
      108        7       25       27       27       57       57       57       57
      109       25       27       57       57       50       50       50       50
      110       22       57       27       27       50       50       50       50
      111        7       26       25       25       57       57       57       57
      112        7       26       57       57       35       35       35       35
      113       35       57       53       53       56       56       56       56
      114       16       22       57       57       53       53       53       53
      115       16       50       25       25       57       57       57       57
      116       16       22       50       50       57       57       57       57
      117       25       57       26       26       56       56       56       56
      118       16       53       57       57       56       56       56       56
      119       16       57       25       25       56       56       56       56
      120        6       13       52       52       41       41       41       41
      121        6       52       13       13       17       17       17       17
      122        9       34       53       53       36       36       36       36
      123        9       53       34       34       22       22       22       22
      124        2       16       22       22       50       50       50       50
      125        2       22       16       16       24       24       24       24
      126        4       23       17       17       14       14       14       14
      127       14       23       17       17       52       52       52       52
      128       19       20       52       52       55       55       55       55
      129       20       52       55       55       48       48       48       48
      130        9       53       52       52       36       36       36       36
      131        9       52       53       53       23       23       23       23
      132       34       57       53       53       35       35       35       35
      133       22       53       34       34       57       57       57       57
      134       29       52       40       40       54       54       54       54
      135       13       40       29       29       52       52       52       52
      136       30       54       48       48       55       55       55       55
      137       30       48       54       54       47       47       47       47
      138       37       39       53       53       56       56       56       56
      139       37       53       39       39       38       38       38       38
      140       26       35       56       56       57       57       57       57
      141       26       56       35       35       43       43       43       43
-1
secnum,1    ! reset the section ID to default
! Material Id = {1E1785B7-55B1-4447-B506-8246B9CB79A4}
/wb,elem,end               !  done creating elements
toffst,273.15,      ! Temperature offset from absolute zero
/com,*********** Set Reference Temperature ***********
tref,22.
/wb,mat,start              !  starting to send materials
/com,*********** Send Materials ***********
Temperature = 'TEMP' ! Temperature
MP,DENS,1,7850,	! kg m^-3
MP,ALPX,1,1.2e-05,	! C^-1
MP,C,1,434,	! J kg^-1 C^-1
MP,KXX,1,60.5,	! W m^-1 C^-1
MP,RSVX,1,1.7e-07,	! kg m^3 A^-2 s^-3
MP,EX,1,200000000000,	! Pa
MP,NUXY,1,0.3,
MP,MURX,1,10000,
MP,UVID,1,4c6e7692-dabe-4c6a-9544-bfae026738cd
MP,UMID,1,59002a79-71c2-428e-906b-55d7dbee100e

/wb,mat,end                !  done sending materials
!************************* Model Summary ********************
!Open CASCADE IGES processor 7.9| DE        1|Solid,	Structural Steel,	matid,	1
!************************* End Model Summary ********************
! get the diagonal of the bounding box. Needed later for other things
*get,_xmin,node,,mnloc,x
*get,_ymin,node,,mnloc,y
*get,_zmin,node,,mnloc,z
*get,_xmax,node,,mxloc,x
*get,_ymax,node,,mxloc,y
*get,_zmax,node,,mxloc,z
_ASMDIAG=(_xmax-_xmin)*(_xmax-_xmin)+(_ymax-_ymin)*(_ymax-_ymin)+(_zmax-_zmin)*(_zmax-_zmin)
_ASMDIAG=SQRT(_ASMDIAG)
/wb,contact,start          !  starting to send contact
/wb,contact,end            !  done creating contacts
/golist
/wb,load,start             !  starting to send loads
/gst,on,on
fini
*get,_numnode,node,0,count
*get,_numelem,elem,0,count
*get, _MAXELEMNUM, elem, 0, NUM, MAX
*get, _MAXNODENUM, node, 0, NUM, MAX
*get, _MAXELEMTYPE, etyp, 0, NUM, MAX
*get, _MAXREALCONST, rcon, 0, NUM, MAX
/go
/wb,load,end               !  done creating loads
/com,--- Number of total nodes = %_numnode%
/com,--- Number of contact elements = 0
/com,--- Number of spring elements = 0
/com,--- Number of bearing elements = 0
/com,--- Number of solid elements = 141
/com,--- Number of condensed parts = 0
/com,--- Number of total elements = %_numelem%
*get,_wallbsol,active,,time,wall
/solu
antype,2                   ! modal analysis
_thickRatio=  0     ! Ratio of thick parts in the model
thexpand,off     ! ignore thermal strains
modopt,lanb,12
outres,erase
outres,all,none
outres,nsol,all
mxpand                    ! default expand in case of complex solution
! ****** Begin Command Snippet ******
!   Commands inserted into this file will be executed just prior to the ANSYS SOLVE command.
!   These commands may supersede command settings set by Workbench.

!   Active UNIT system in Workbench when this object was created:  Metric (m, kg, N, s, V, A)
!   NOTE:  Any data that requires units (such as mass) is assumed to be in the consistent solver unit system.
!                See Solving Units in the help system for more information.
LUMPM, ON

! ****** End   Command Snippet ******
! *********** WB SOLVE COMMAND ***********
! check interactive state
*get,ANSINTER_,active,,int
*if,ANSINTER_,ne,0,then
/eof
*endif
solve
/com *************** Write FE CONNECTORS ********* 
CEWRITE,file,ce,,INTE
*get,_nmodalsolproc,active,0,numcpu
fini
/nopr
*get,_numnode,node,0,count
*get,_numelem,elem,0,count
*get, _MAXELEMNUM, elem, 0, NUM, MAX
*get, _MAXNODENUM, node, 0, NUM, MAX,,,INTERNAL
*get, _MAXELEMTYPE, etyp, 0, NUM, MAX
*get, _MAXREALCONST, rcon, 0, NUM, MAX
*get,_NSOLTHREADS,active,0,ntfs
*get,_NSOLPROCESSES,active,0,npfs
/gopr
*get,_wallasol,active,,time,wall
/post1
/nopr
*dim,_direction,CHAR,6,1
_direction(1) = 'X'
_direction(2) = 'Y'
_direction(3) = 'Z'
_direction(4) = 'ROTX'
_direction(5) = 'ROTY'
_direction(6) = 'ROTZ'
*get,_lastLS,active,0,set,LSTP
*get,_beginset,active,0,set,nset,first,_lastLS
*get,_endset,active,0,set,nset,last,_lastLS
_nummodes = 0
*if,_endset,gt,0,then
_nummodes = _endset - _beginset + 1
*endif
*do,i_mode,1,_nummodes
   *do,j_component,1,6
			*get,PFACT_%i_mode%_%j_component%,MODE,%i_mode%,PFACT,,DIREC,_direction(%j_component%)
   *enddo
*enddo
*dim,_tmdirection,CHAR,6,1
_tmdirection(1) = 'X'
_tmdirection(2) = 'Y'
_tmdirection(3) = 'Z'
_tmdirection(4) = 'X'
_tmdirection(5) = 'Y'
_tmdirection(6) = 'Z'
*do,j_component,1,6
    *if,j_component,gt,3,then
        *get,TOTALMASS_%j_component%,ELEM,0,IOR,_tmdirection(%j_component%)
    *else
        *get,TOTALMASS_%j_component%,ELEM,0,MTOT,_tmdirection(%j_component%)
    *endif
*enddo
/gopr
! ****** Begin Command Snippet ******
!   Commands inserted into this file will be executed immediately after the ANSYS /POST1 command.

!   Active UNIT system in Workbench when this object was created:  Metric (m, kg, N, s, V, A)
!   NOTE:  Any data that requires units (such as mass) is assumed to be in the consistent solver unit system.
!                See Solving Units in the help system for more information.



*SMAT, Ksparse, D, IMPORT, FULL, file.full, STIFF
*PRINT, Ksparse, K.sti

*SMAT, Msparse, D, IMPORT, FULL, file.full, MASS
*PRINT, Msparse, M.mass
! ****** End   Command Snippet ******
xmlo,ENCODING,ISO-8859-1
xmlo,parm
/xml,parm,xml
fini
/gopr
*get,_walldone,active,,time,wall
_preptime=(_wallbsol-_wallstrt)*3600
_solvtime=(_wallasol-_wallbsol)*3600
_posttime=(_walldone-_wallasol)*3600
_totaltim=(_walldone-_wallstrt)*3600
*get,_dlbratio,active,0,solu,dlbr
*get,_combtime,active,0,solu,comb
*get,_ssmode,active,0,solu,ssmm
*get,_ndofs,active,0,solu,ndof
/com,--- Total number of nodes = %_numnode%
/com,--- Total number of elements = %_numelem%
/com,--- Element load balance ratio = %_dlbratio%
/com,--- Time to combine distributed files = %_combtime%
/com,--- Sparse memory mode = %_ssmode%
/com,--- Number of DOF = %_ndofs%
/wb,file,end               ! done with WB generated input
